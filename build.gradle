plugins {
    id 'java'
    id 'application'
}

repositories {
    //jcenter()
    //mavenCentral()
    flatDir {
        dirs '/Users/jkw/.mu/lib'
    }
}

dependencies {
    implementation 'net.sf.trove4j:trove4j:3.0.3'
    implementation 'excelsiorg:solace:1.0'
    implementation 'excelsiorg:gimmal:1.0'
    implementation 'groovy:groovy-all:1.8.9'
    implementation 'imgscalr:imgscalr-lib:4.2'
    implementation 'Fxyz:Fxyz-Core:1.0'
    implementation 'Fxyz:Fxyz-lib:1.0'
    implementation 'google:gson:2.8.5'
    implementation 'apache:log4j:1.2.15'
    implementation 'asomov:snakeyaml:1.21'

    testImplementation 'junit:junit:4.12'
}

//task createStartScripts(type: CreateStartScripts) {
    //defaultJvmOpts=['-Dapp2.root=$APP_HOME']
//}

sourceSets {
    main {
        //output.resourcesDir="$buildDir/resources"
        java {
            srcDirs = ['src/main']
        }
        resources {
            srcDirs = ['src/resources','src/etc']
        }
    }
}

application {
    applicationDefaultJvmArgs = ["-Xmx12g","-Dapple.laf.useScreenMenuBar=true","-XX:-OmitStackTraceInFastThrow","-Dapp.root=HACK_FOR_GRADLE"]
    startScripts {
        doLast {
            unixScript.text = unixScript.text.replace('HACK_FOR_GRADLE', '\$APP_HOME')
            unixScript.text = unixScript.text.replace('-classpath','\$GRADLE_OPTS -classpath')
            windowsScript.text = windowsScript.text.replace('HACK_FOR_GRADLE', '%~dp0..')
        }
    }
}

distributions {
    main {
        contents {
        }
    }
}

applicationDistribution.from("src/etc/") {
    into "etc"
}

version='1.0'
group='excelsiorg'
applicationName='Nausicaa'
mainClassName='org.excelsi.nausicaa.Nausicaa'
